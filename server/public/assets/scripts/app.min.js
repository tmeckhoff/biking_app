/*! biking_app 2015-09-04 */
var myApp=angular.module("myApp",["ngRoute"]);console.log("In the app.js"),myApp.config(["$routeProvider",function(a){a.when("/home",{templateUrl:"/assets/views/routes/home.html",controller:"firstController"}).otherwise({redirectTo:"/home"})}]),myApp.controller("firstController",["$rootScope","$scope","$http",function(a,b,c){b.ratings=[],b.sendRating=function(){return c.post("/rating",{title:b.title,rating:b.rating,comment:b.comment,latitude:b.latitude,longitude:b.longitude}).success(function(a){b.title="",b.rating="",b.comment="",b.successMessage="You rated it!",b.showSuccessMessage=!0,b.refreshRatings()})},b.refreshRatings=function(){return c.get("/rating").then(function(a){if(200!==a.status)throw new Error("Failed to get ratings!");return b.ratings.push(a.data),a.data})},console.log(b.ratings),a.$on("hideMessages",function(){b.$apply(function(){b.showSuccessMessage=!1})});var d=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:44.970697,lng:-93.2614785},mapTypeId:google.maps.MapTypeId.ROADMAP}),e=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]}];d.setOptions({styles:e});var f;google.maps.event.addListener(d,"click",function(c){f=new google.maps.Marker({draggable:!1,position:c.latLng,map:d,animation:google.maps.Animation.DROP,icon:"../assets/styles/images/cycling.png"}),a.$broadcast("hideMessages"),b.latitude=f.getPosition().lat(),b.longitude=f.getPosition().lng();var e=new google.maps.InfoWindow({content:b.contentString});google.maps.event.addListener(f,"click",function(){e.open(d,f)}),google.maps.event.addListener(e,"closeclick",function(){})})}]);